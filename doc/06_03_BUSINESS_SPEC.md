# ビジネス層機能仕様

## 1 機能概要


- タスク作成
  - 永続化層の`generateItem()`により、id等のフィールドを設定して`writeTask()`によりアイテム書き込み
- その他のタスク処理
  - itemの必要なフィールドを編集して、永続化層の`writeTask()`によりアイテム書き込み
    - タスク更新: プレゼンテーション層からの指定個所を更新
    - タスク完了: completedAtフィールドを現在時刻に設定、UTC
    - タスク削除: isDeletedフィールドをtrueに設定
    - タスク未完了化: completedAtにnullを指定
    - タスク復帰: isDeletedフィールドをfalseに設定


## 2 機能リスト

| 機能ID | 機能名 | 優先度 | 対応要件ID |
|--------|--------|--------|-----------|
| F-B-001 | 初期化 | 必須 | FR-5.1, 5.2 |
| F-B-002 | タスク読み込み | 必須 | FR-2.1~2.6 |
| F-B-003 | タスク作成 | 必須 | FR-1.1 |
| F-B-004 | タスク更新 | 必須 | FR-3.1, 3.4 |
| F-B-005 | タスク完了 | 必須 | FR-3.3 |
| F-B-006 | タスク削除 | 必須 | FR-3.2, 3.5 |
| F-B-007 | タスク未完了化 | 低 | FR-3.6 |
| F-B-008 | タスク復帰 | 低 | FR-3.7 |
| F-B-009 | 設定読み込み | 必須 | FR-2.1, 2.3 |
| F-B-010 | 設定更新 | 必須 | FR-2.1, 2.3, 4.1 |
| F-B-010 | タスクLLM補完 | 中 | FR-1.2, 1.3, 4.1 |
| F-B-011 | リロード | 高 | なし |

## 3 シーケンス図

なし。

## 4 状態遷移図

なし。

## 5 機能詳細仕様

### F-B-001 初期化

**概要:**

ページロード時に永続化層の初期化を行います。
まず永続化層のLocalStorage初期化をし、次にDB読み出しを行います。

**エラー:**



---

## 6 データ型

詳細はtypes.tsを参照。

- タスクリスト: `Task[]`型
- Setting: `UserSettings`型
